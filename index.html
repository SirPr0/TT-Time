<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TT Clock</title>
<link rel="icon" type="image/x-icon" href="https://cdn.sirpro.cc/s/QbZlfI.ico">
<style>
    html, body {
        margin: 0;
        width: 100%;
        height: 100%;
        background: transparent;
        overflow: hidden;
        font-family: "Segoe UI", Tahoma, sans-serif;
        color: white;
        user-select: none;
    }

    .item {
        position: absolute;
        cursor: grab;
    }

    .item:active {
        cursor: grabbing;
    }

    #time {
        font-size: 1.00464vw;
        font-weight: 869;
    }

    #date {
        font-size: 1.00464vw;
        font-weight: 869;
        text-align: center;
        line-height: 1.1;
        text-transform: uppercase;
    }

    @media (max-width: 768px) {
        #time {
            font-size: 2.5116vw;
        }
        #date {
            font-size: 2.5116vw;
        }
    }

#countdown {
  position: absolute;
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 80px;
  font-weight: bold;
  color: white;
  display: none;
}

#message {
  position: absolute;
  top: 40%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 72px;
  font-weight: 900;
  background: linear-gradient(
    90deg,
    red,
    orange,
    yellow,
    green,
    cyan,
    blue,
    violet
  );
  background-size: 400% 400%;
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: rainbow 2s linear infinite;
  display: none;
  white-space: nowrap;
}

@keyframes rainbow {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}

canvas {
  position: absolute;
  top: 0;
  left: 0;
}
</style>
</head>

<body>

<div class="item" id="time">--:--</div>

<div class="item" id="date">----</div>

<div id="countdown"></div>
<div id="message">Happy New Year 2026</div>
<canvas id="fireworks"></canvas>

<script>
function updateClock() {
    const now = new Date();

    document.getElementById("time").textContent =
        now.toLocaleTimeString(undefined, {
            hour: "2-digit",
            minute: "2-digit",
            hour12: true
        });

    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    const year = now.getFullYear();
    const weekday = now.toLocaleDateString(undefined, { weekday: "short" });
    document.getElementById("date").textContent = `${month}/${day}/${year} | ${weekday}`;
}

updateClock();
setInterval(updateClock, 1000);

function makeDraggable(el, key) {
    let offsetX = 0, offsetY = 0, dragging = false;

    const saved = JSON.parse(localStorage.getItem(key));
    if (saved) {
        el.style.left = saved.x + "px";
        el.style.top = saved.y + "px";
    } else {
        const centerX = window.innerWidth / 2 - el.offsetWidth / 2;
        const centerY = window.innerHeight / 2 - el.offsetHeight / 2;
        if (key === "clock_date_pos") {
            const timeEl = document.getElementById("time");
            el.style.left = centerX + "px";
            el.style.top = (centerY + timeEl.offsetHeight + 10) + "px";
        } else {
            el.style.left = centerX + "px";
            el.style.top = centerY + "px";
        }
    }

    el.addEventListener("mousedown", (e) => {
        dragging = true;
        offsetX = e.clientX - el.offsetLeft;
        offsetY = e.clientY - el.offsetTop;
    });

    document.addEventListener("mousemove", (e) => {
        if (!dragging) return;
        el.style.left = (e.clientX - offsetX) + "px";
        el.style.top = (e.clientY - offsetY) + "px";
    });

    document.addEventListener("mouseup", () => {
        if (!dragging) return;
        dragging = false;

        localStorage.setItem(key, JSON.stringify({
            x: el.offsetLeft,
            y: el.offsetTop
        }));
    });

    el.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        const timeEl = document.getElementById("time");
        const dateEl = document.getElementById("date");
        const centerX = window.innerWidth / 2 - timeEl.offsetWidth / 2;
        const centerY = window.innerHeight / 2 - timeEl.offsetHeight / 2;
        const dateCenterY = centerY + timeEl.offsetHeight + 10;
        timeEl.style.left = centerX + "px";
        timeEl.style.top = centerY + "px";
        dateEl.style.left = centerX + "px";
        dateEl.style.top = dateCenterY + "px";
        localStorage.setItem("clock_time_pos", JSON.stringify({
            x: centerX,
            y: centerY
        }));
        localStorage.setItem("clock_date_pos", JSON.stringify({
            x: centerX,
            y: dateCenterY
        }));
    });
}

makeDraggable(document.getElementById("time"), "clock_time_pos");
makeDraggable(document.getElementById("date"), "clock_date_pos");

function toggleColor(el, key) {
    el.addEventListener('dblclick', () => {
        const currentColor = el.style.color || 'white';
        const newColor = currentColor === 'white' ? 'black' : 'white';
        el.style.color = newColor;
        localStorage.setItem(key, newColor);
    });

    const savedColor = localStorage.getItem(key);
    if (savedColor) {
        el.style.color = savedColor;
    }
}

toggleColor(document.getElementById("time"), "clock_time_color");
toggleColor(document.getElementById("date"), "clock_date_color");

document.addEventListener('keydown', (e) => {
    if (e.key === 'r' || e.key === 'R') {
        const timeEl = document.getElementById("time");
        const dateEl = document.getElementById("date");
        const centerX = window.innerWidth / 2 - timeEl.offsetWidth / 2;
        const centerY = window.innerHeight / 2 - timeEl.offsetHeight / 2;
        const dateCenterY = centerY + timeEl.offsetHeight + 10;
        timeEl.style.left = centerX + "px";
        timeEl.style.top = centerY + "px";
        dateEl.style.left = centerX + "px";
        dateEl.style.top = dateCenterY + "px";
        localStorage.setItem("clock_time_pos", JSON.stringify({x: centerX, y: centerY}));
        localStorage.setItem("clock_date_pos", JSON.stringify({x: centerX, y: dateCenterY}));
    }
});




const canvas = document.getElementById("fireworks");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let fireworks = [];
let animationId;
let fireworkInterval;

function random(min, max) {
  return Math.random() * (max - min) + min;
}

function createFirework() {
  const x = random(100, canvas.width - 100);
  const y = random(50, canvas.height / 2);
  const particles = [];

  for (let i = 0; i < 50; i++) {
    particles.push({
      x,
      y,
      vx: random(-4, 4),
      vy: random(-4, 4),
      life: random(30, 60),
      color: `hsl(${Math.random() * 360}, 100%, 50%)`
    });
  }

  fireworks.push(particles);
}

function animateFireworks() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  fireworks.forEach((particles, index) => {
    particles.forEach((p, i) => {
      p.x += p.vx;
      p.y += p.vy;
      p.life--;

      ctx.fillStyle = p.color;
      ctx.fillRect(p.x, p.y, 3, 3);

      if (p.life <= 0) {
        particles.splice(i, 1);
      }
    });

    if (particles.length === 0) {
      fireworks.splice(index, 1);
    }
  });

  animationId = requestAnimationFrame(animateFireworks);
}

function startFireworks() {
  animateFireworks();
  fireworkInterval = setInterval(createFirework, 300);
}

function stopFireworks() {
  clearInterval(fireworkInterval);
  cancelAnimationFrame(animationId);
  ctx.clearRect(0, 0, canvas.width, canvas.height);
}

window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});

let timeChecker = setInterval(() => {
    const now = new Date();
    if (now.getFullYear() === 2025 && now.getMonth() === 12 && now.getDate() === 31 && now.getHours() === 23 && now.getMinutes() === 50) {
        clearInterval(timeChecker);
        startNewYear();
    }
}, 5000);

function startNewYear() {
    const now = new Date();
    const midnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0);
    let timeLeft = Math.floor((midnight - now) / 1000);
    const countdownEl = document.getElementById("countdown");
    const messageEl = document.getElementById("message");

    countdownEl.style.display = "block";

    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;
    countdownEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

    const countdownTimer = setInterval(() => {
        timeLeft--;
        minutes = Math.floor(timeLeft / 60);
        seconds = timeLeft % 60;
        countdownEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

        if (timeLeft < 0) {
            clearInterval(countdownTimer);
            countdownEl.style.display = "none";
            messageEl.style.display = "block";
            startFireworks();
            setTimeout(() => {
                messageEl.style.display = "none";
                stopFireworks();
            }, 25000);
        }
    }, 1000);
}
</script>

</body>
</html>
